# 书籍管理与评论系统测试文档

## 1. 引言

### 1.1 文档目的
本文档旨在详细描述书籍管理与评论系统的测试计划和测试用例，确保系统功能符合需求规格说明书的要求，保证系统的质量和稳定性。

### 1.2 文档范围
本文档涵盖了书籍管理与评论系统的功能测试、数据库测试等内容，包括测试环境、测试范围、测试用例设计和测试执行计划等。

### 1.3 参考资料
- 《书籍管理与评论系统需求规格说明书》
- 《书籍管理与评论系统概要设计文档》
- 《书籍管理与评论系统数据库设计文档》

## 2. 测试环境

### 2.1 硬件环境
- 服务器：4核8G内存以上
- 数据库服务器：4核8G内存以上
- 客户端：Windows/Linux/Mac操作系统，4GB内存以上

### 2.2 软件环境
- JDK 1.8+
- MySQL 5.7+/8.0
- Tomcat 9.0+ 或 Spring Boot内嵌Tomcat
- Chrome/Firefox/Safari最新版本浏览器

### 2.3 测试工具
- JMeter：性能测试
- MySQL Workbench：数据库测试
- Postman：API测试（如需要）

## 3. 测试范围

### 3.1 功能测试范围
- 用户管理模块：注册、登录、个人信息管理
- 书籍管理模块：书籍添加、编辑、查询、收藏（user_favorite_books）
- 评论管理模块：评论发布、点赞（comment_likes）、回复、审核
- 分类管理模块：分类添加、编辑、查询
- 管理员后台：用户管理、书籍管理、评论管理、分类管理

### 3.2 数据库测试范围
- 表结构验证
- 数据完整性测试
- 索引性能测试
- 新增表（user_favorite_books、comment_likes）的功能验证

## 4. 功能测试用例

### 4.1 用户管理模块测试用例

| 测试用例ID | 测试功能 | 测试步骤 | 预期结果 | 优先级 |
|------------|----------|----------|----------|--------|
| TC-USER-001 | 用户注册 | 1. 访问注册页面<br>2. 输入有效的用户名、密码、邮箱、手机号<br>3. 点击注册按钮 | 注册成功，跳转到登录页面 | 高 |
| TC-USER-002 | 用户注册（用户名已存在） | 1. 访问注册页面<br>2. 输入已存在的用户名及其他有效信息<br>3. 点击注册按钮 | 注册失败，提示用户名已存在 | 高 |
| TC-USER-003 | 用户登录 | 1. 访问登录页面<br>2. 输入正确的用户名和密码<br>3. 点击登录按钮 | 登录成功，跳转到首页 | 高 |
| TC-USER-004 | 用户登录（密码错误） | 1. 访问登录页面<br>2. 输入正确的用户名和错误的密码<br>3. 点击登录按钮 | 登录失败，提示密码错误 | 高 |
| TC-USER-005 | 个人信息修改 | 1. 登录系统<br>2. 进入个人中心<br>3. 修改昵称、头像等信息<br>4. 点击保存按钮 | 信息修改成功，页面显示更新后的信息 | 中 |
| TC-USER-006 | 密码修改 | 1. 登录系统<br>2. 进入密码修改页面<br>3. 输入原密码和新密码<br>4. 点击确认修改按钮 | 密码修改成功，下次登录需使用新密码 | 高 |

### 4.2 书籍管理模块测试用例

| 测试用例ID | 测试功能 | 测试步骤 | 预期结果 | 优先级 |
|------------|----------|----------|----------|--------|
| TC-BOOK-001 | 书籍列表查看 | 1. 访问书籍列表页面<br>2. 验证页面显示正常<br>3. 检查分页功能 | 书籍列表正确显示，分页功能正常 | 高 |
| TC-BOOK-002 | 书籍搜索 | 1. 访问书籍列表页面<br>2. 在搜索框输入关键词<br>3. 点击搜索按钮 | 显示包含关键词的书籍列表 | 高 |
| TC-BOOK-003 | 书籍详情查看 | 1. 在书籍列表点击任意书籍<br>2. 进入书籍详情页面 | 正确显示书籍的详细信息 | 高 |
| TC-BOOK-004 | 添加书籍（管理员） | 1. 以管理员身份登录<br>2. 进入添加书籍页面<br>3. 填写书籍信息<br>4. 点击保存按钮 | 书籍添加成功，显示在书籍列表中 | 高 |
| TC-BOOK-005 | 编辑书籍（管理员） | 1. 以管理员身份登录<br>2. 在书籍列表选择一本书<br>3. 点击编辑按钮<br>4. 修改书籍信息<br>5. 点击保存按钮 | 书籍信息更新成功 | 高 |
| TC-BOOK-006 | 删除书籍（管理员） | 1. 以管理员身份登录<br>2. 在书籍列表选择一本书<br>3. 点击删除按钮<br>4. 确认删除 | 书籍从列表中移除 | 高 |
| TC-BOOK-007 | 书籍收藏（user_favorite_books） | 1. 登录系统<br>2. 进入书籍详情页面<br>3. 点击收藏按钮 | 收藏成功，按钮状态改变 | 高 |
| TC-BOOK-008 | 查看我的收藏 | 1. 登录系统<br>2. 进入个人中心<br>3. 点击我的收藏 | 显示用户收藏的所有书籍 | 高 |
| TC-BOOK-009 | 取消收藏 | 1. 登录系统<br>2. 进入我的收藏页面<br>3. 选择一本书籍点击取消收藏 | 书籍从收藏列表中移除 | 高 |

### 4.3 评论管理模块测试用例

| 测试用例ID | 测试功能 | 测试步骤 | 预期结果 | 优先级 |
|------------|----------|----------|----------|--------|
| TC-COMMENT-001 | 发表评论 | 1. 登录系统<br>2. 进入书籍详情页面<br>3. 输入评论内容<br>4. 点击发表按钮 | 评论成功显示在评论列表中 | 高 |
| TC-COMMENT-002 | 评论点赞（comment_likes） | 1. 登录系统<br>2. 在评论列表选择一条评论<br>3. 点击点赞按钮 | 点赞成功，点赞数增加 | 高 |
| TC-COMMENT-003 | 取消评论点赞 | 1. 登录系统<br>2. 找到已点赞的评论<br>3. 点击点赞按钮 | 取消点赞，点赞数减少 | 高 |
| TC-COMMENT-004 | 回复评论 | 1. 登录系统<br>2. 在评论列表选择一条评论<br>3. 点击回复按钮<br>4. 输入回复内容<br>5. 点击发送按钮 | 回复成功显示在原评论下方 | 高 |
| TC-COMMENT-005 | 删除评论 | 1. 登录系统<br>2. 找到自己发表的评论<br>3. 点击删除按钮 | 评论从列表中移除 | 中 |
| TC-COMMENT-006 | 评论审核（管理员） | 1. 以管理员身份登录<br>2. 进入评论管理页面<br>3. 选择待审核的评论<br>4. 点击审核通过按钮 | 评论状态更新为已审核 | 高 |
| TC-COMMENT-007 | 评论驳回（管理员） | 1. 以管理员身份登录<br>2. 进入评论管理页面<br>3. 选择待审核的评论<br>4. 点击驳回按钮 | 评论状态更新为已删除 | 中 |

### 4.4 分类管理模块测试用例

| 测试用例ID | 测试功能 | 测试步骤 | 预期结果 | 优先级 |
|------------|----------|----------|----------|--------|
| TC-CATEGORY-001 | 添加分类（管理员） | 1. 以管理员身份登录<br>2. 进入分类管理页面<br>3. 输入分类名称和描述<br>4. 点击添加按钮 | 分类添加成功，显示在列表中 | 中 |
| TC-CATEGORY-002 | 编辑分类（管理员） | 1. 以管理员身份登录<br>2. 在分类列表选择一个分类<br>3. 点击编辑按钮<br>4. 修改分类信息<br>5. 点击保存按钮 | 分类信息更新成功 | 中 |
| TC-CATEGORY-003 | 删除分类（管理员） | 1. 以管理员身份登录<br>2. 在分类列表选择一个分类<br>3. 点击删除按钮<br>4. 确认删除 | 分类从列表中移除 | 中 |
| TC-CATEGORY-004 | 按分类筛选书籍 | 1. 访问书籍列表页面<br>2. 选择一个分类进行筛选 | 只显示该分类下的书籍 | 高 |

## 5. 数据库测试用例

### 5.1 表结构验证测试用例

| 测试用例ID | 测试功能 | 测试步骤 | 预期结果 | 优先级 |
|------------|----------|----------|----------|--------|
| TC-DB-001 | users表结构验证 | 1. 连接MySQL数据库<br>2. 执行SHOW CREATE TABLE users命令<br>3. 验证表结构与设计文档一致 | 表结构完全符合设计文档要求 | 高 |
| TC-DB-002 | books表结构验证 | 1. 连接MySQL数据库<br>2. 执行SHOW CREATE TABLE books命令<br>3. 验证表结构与设计文档一致 | 表结构完全符合设计文档要求 | 高 |
| TC-DB-003 | categories表结构验证 | 1. 连接MySQL数据库<br>2. 执行SHOW CREATE TABLE categories命令<br>3. 验证表结构与设计文档一致 | 表结构完全符合设计文档要求 | 高 |
| TC-DB-004 | comments表结构验证 | 1. 连接MySQL数据库<br>2. 执行SHOW CREATE TABLE comments命令<br>3. 验证表结构与设计文档一致 | 表结构完全符合设计文档要求 | 高 |
| TC-DB-005 | user_favorite_books表结构验证 | 1. 连接MySQL数据库<br>2. 执行SHOW CREATE TABLE user_favorite_books命令<br>3. 验证表结构与设计文档一致 | 表结构完全符合设计文档要求 | 高 |
| TC-DB-006 | comment_likes表结构验证 | 1. 连接MySQL数据库<br>2. 执行SHOW CREATE TABLE comment_likes命令<br>3. 验证表结构与设计文档一致 | 表结构完全符合设计文档要求 | 高 |
| TC-DB-007 | roles表结构验证 | 1. 连接MySQL数据库<br>2. 执行SHOW CREATE TABLE roles命令<br>3. 验证表结构与设计文档一致 | 表结构完全符合设计文档要求 | 高 |
| TC-DB-008 | user_roles表结构验证 | 1. 连接MySQL数据库<br>2. 执行SHOW CREATE TABLE user_roles命令<br>3. 验证表结构与设计文档一致 | 表结构完全符合设计文档要求 | 高 |

### 5.2 数据完整性测试用例

| 测试用例ID | 测试功能 | 测试步骤 | 预期结果 | 优先级 |
|------------|----------|----------|----------|--------|
| TC-DB-009 | 用户-收藏关系完整性 | 1. 尝试插入user_favorite_books记录，使用不存在的user_id<br>2. 验证插入是否成功 | 插入失败，外键约束生效 | 高 |
| TC-DB-010 | 书籍-收藏关系完整性 | 1. 尝试插入user_favorite_books记录，使用不存在的book_id<br>2. 验证插入是否成功 | 插入失败，外键约束生效 | 高 |
| TC-DB-011 | 用户-评论关系完整性 | 1. 尝试插入comments记录，使用不存在的user_id<br>2. 验证插入是否成功 | 插入失败，外键约束生效 | 高 |
| TC-DB-012 | 书籍-评论关系完整性 | 1. 尝试插入comments记录，使用不存在的book_id<br>2. 验证插入是否成功 | 插入失败，外键约束生效 | 高 |
| TC-DB-013 | 用户-评论点赞关系完整性 | 1. 尝试插入comment_likes记录，使用不存在的user_id<br>2. 验证插入是否成功 | 插入失败，外键约束生效 | 高 |
| TC-DB-014 | 评论-点赞关系完整性 | 1. 尝试插入comment_likes记录，使用不存在的comment_id<br>2. 验证插入是否成功 | 插入失败，外键约束生效 | 高 |

### 5.3 索引性能测试用例

| 测试用例ID | 测试功能 | 测试步骤 | 预期结果 | 优先级 |
|------------|----------|----------|----------|--------|
| TC-DB-015 | users表username索引测试 | 1. 在users表中插入大量测试数据<br>2. 执行SELECT * FROM users WHERE username = ?<br>3. 检查执行计划是否使用索引 | 查询使用索引，执行效率高 | 中 |
| TC-DB-016 | books表title索引测试 | 1. 在books表中插入大量测试数据<br>2. 执行SELECT * FROM books WHERE title LIKE ?<br>3. 检查执行计划是否使用索引 | 查询使用索引，执行效率高 | 中 |
| TC-DB-017 | user_favorite_books复合索引测试 | 1. 在user_favorite_books表中插入大量测试数据<br>2. 执行SELECT * FROM user_favorite_books WHERE user_id = ? AND book_id = ?<br>3. 检查执行计划是否使用索引 | 查询使用索引，执行效率高 | 中 |
| TC-DB-018 | comment_likes复合索引测试 | 1. 在comment_likes表中插入大量测试数据<br>2. 执行SELECT * FROM comment_likes WHERE user_id = ? AND comment_id = ?<br>3. 检查执行计划是否使用索引 | 查询使用索引，执行效率高 | 中 |

## 6. 测试执行计划

### 6.1 测试阶段划分
1. **单元测试阶段**：由开发人员负责，验证各模块的独立功能
2. **集成测试阶段**：验证模块间的交互是否正常
3. **系统测试阶段**：验证整个系统的功能和性能
4. **验收测试阶段**：由用户参与，确认系统是否满足需求

### 6.2 测试资源分配
- 测试人员：2-3名
- 测试环境：1套独立测试环境
- 测试数据：准备充分的测试数据，包括正常和边界情况

### 6.3 测试时间安排
| 阶段 | 开始时间 | 结束时间 | 持续时间 |
|------|----------|----------|----------|
| 测试准备 | 待定 | 待定 | 2天 |
| 单元测试 | 待定 | 待定 | 3天 |
| 集成测试 | 待定 | 待定 | 3天 |
| 系统测试 | 待定 | 待定 | 5天 |
| 验收测试 | 待定 | 待定 | 2天 |
| 测试总结 | 待定 | 待定 | 1天 |

## 7. 风险评估

| 风险描述 | 影响程度 | 可能性 | 缓解措施 |
|----------|----------|--------|----------|
| 测试环境不稳定 | 高 | 中 | 确保测试环境配置正确，定期备份环境 |
| 测试数据准备不充分 | 中 | 低 | 提前设计测试数据，确保覆盖各种场景 |
| 新增表（user_favorite_books、comment_likes）功能复杂 | 高 | 中 | 重点测试这两个表的功能，编写详细的测试用例 |
| 系统性能问题 | 高 | 中 | 进行性能测试，优化数据库查询 |
| 用户权限控制逻辑复杂 | 中 | 中 | 全面测试各种权限场景，确保安全性 |

## 8. 测试完成标准

1. **功能测试覆盖率**：所有需求规格中的功能点100%被测试覆盖
2. **测试用例执行率**：测试用例100%执行完成
3. **缺陷修复率**：严重和高优先级缺陷100%修复，中优先级缺陷修复率≥90%
4. **回归测试通过**：修复缺陷后，回归测试全部通过
5. **性能指标达标**：系统响应时间满足需求要求（页面加载≤3秒，API响应≤1秒）

## 9. 测试报告模板

测试完成后，将生成正式的测试报告，包括以下内容：

1. **测试概述**：测试目的、范围、环境等基本信息
2. **测试执行情况**：测试用例执行数量、通过率等统计信息
3. **缺陷统计**：按严重程度、功能模块等分类的缺陷统计
4. **测试结论**：系统是否通过测试的明确结论
5. **建议与改进**：对系统的建议和改进措施

---

**文档版本**：1.0
**编写日期**：2023年XX月XX日
**审批人**：XXX